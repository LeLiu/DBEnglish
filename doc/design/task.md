# 学习任务设计

## 学习任务生成方法

### 单词的分类

将单词分为三类，未开始学习的单词、正在学习的单词和已经掌握的单词。在生成学习任务时，每种类型的单词其个数权重不同。
升成学习任务时，选择的单词个数大于等于min_daily_word_count且小于等于max_daily_word_count。
在统计选择了多少个单词时，计算已选中的单词的个数加权和。
例如单词1的个数权重为0.5，而单词2的个数权重为0.3，则选中的单词个数加权和为0.5+0.3=0.8。

#### 未开始学习的单词

未开始学习的单词review_count为0，且mastery_level为0。
单词个数权重为1。

#### 正在学习的单词

正在学习的单词review_count不为0，且mastery_level小于1。
单词个权重为$1-mastery\_level$。

正在学习的单词根据学习进度分为三类：

1. 已延期的单词：下一次学习时间段为当前时间段之前的单词。由于某种原因该单词在已经过去的下一次学时时间段并未被学习；
2. 本次学习的单词：下一次学习时间段为当前时间段；
3. 未来学习的单词：下一次学习时间段为当前时间段之后的单词。

### 已掌握的单词

已掌握的单词review_count不为0，且mastery_level等于1。
单词个权重为0。

### 单词的选择

单词的选择顺序为：

1. 正在学习的单词中的已延期的单词；
2. 正在学习的单词中的本次学习的单词；
3. 未开始学习的单词。

在上述选择步骤中，每类单词中按照单词编号来选择单词，优先选择编号小的单词。每选择一个单词后，更新已选中的单词个数加权和。
若已选择的单词个数加权和大于等于max_daily_word_count，则停止选择单词。
若正在学习的单词中的已延期的单词和正在学习的单词中的本次学习的单词选择完后，已选择的单词个数加权和小于min_daily_word_count，
则继续选择未开始学习的单词。

## 单词学习活动设计

1. **词义讲解（L1）**
    对单词要学习的词义进行讲解，包括单词的词性、词义和例句等。

2. **语音跟读（L2）**
    播放标准发音，用户跟读录音，AI评分（准确度≥80%通过）。

3. **单词拼写讲解（L3）**
    对单词的拼写进行讲解，包括单词的拼写规则。

## 单词测试项目设计

1. **动态拼写补全（T1）**
    播放标准发音，用户根据发音全使用键盘补全单词拼写中缺少的字母。限时60秒完成。

2. **单词拼写（T2）**
    播放标准发音，用户根据发音全键盘自主输入。限时60秒完成。

3. **例句选择填空（T3）**
    每个例句预留1个空位，提供4个候选单词（含干扰项），选择正确的单词填入空位，限时60秒完成。

4. **词义选择（T4）**
    每个单词提供4个词义，选择正确的词义。限时60秒完成。

## 学习过程动态生成

每个单词的学习过程根据[掌握程度](./mastery.md)态生成，除第一次学习外，每次学习前先测试，学习后再测试一次。具体如下表：

| 掌握程度 | 前测试项   | 学习项          | 后测试项            | 延期增加学习项 |
|---------|-----------|-----------------|--------------------|--------------|
| 0.00    |           | L1,L2,L3        | T1,T2,T3,T4        |              |
| 0.20    |T1,T4      | L1,L2           | T2,T4              |L3            |
| 0.30    |T1,T4      | L1,L2           | T2,T4              |L3            |
| 0.50    |T1,T4      | L1,L2           | T2,T4              |L2,L3         |
| 0.65    |T1,T4      | L1              | T2,T4              |L2,L3         |
| 0.80    |T1,T4      | L1              | T2,T4              |l2,L3         |
| 0.90    |T1,T4      | L2              | T2,T4              |L2            |
| 0.95    |T1,T4      | L2              | T2,T4              |L2            |
| 0.10    |           |                 |                    |              |

测试失败后，则增加相应的学习项，学习完成后，继续测试，直至测试通过。

| 测试失败项 | 增加学习项 |
|-----------|-----------|
|T1         |L2,L3      |
|T2         |L2,L3      |
|T3         |L1         |
|T4         |L1         |

## 学习流程

1. 先按当次要学习的单词和掌握情况，生成学前测试项，测试过程中，每种测试项下对所有要测试的单词集中测试，而非对单个单词一次执行所有测试项；
2. 测试完成后根据既定学习项和测试失败后增加的学习项来生成学习项，每种学习项下的所有单词集中学习，而非对单个单词一次执行所有学习项；
3. 学习完成后生成学后测试项，若有单词某项测试不过，则再次生成对应学习项，对所有要继续学习的单词的学习项进行整理，再次学习；
4. 再次学习的单词，再次进行学后测试，测试项和上次一致，重复上一步和本步骤，直至所有单词测试项通过。
